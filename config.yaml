# ============================================================
# FundedNext EURUSD Trading Bot - Configuration
# ============================================================
# mode: "dry_run" (Mac testing) | "backtest" | "live" (VPS)
# ============================================================

mode: "dry_run"

# --- MT5 Connection (live mode only, Windows VPS) ---
mt5:
  path: "C:/Program Files/MetaTrader 5/terminal64.exe"
  login: 0
  password: ""
  server: ""
  timeout: 10000

# --- Symbol & Timeframe ---
symbol: "EURUSD"
timeframe_entry: "H1"
timeframe_trend: "H4"
check_interval_seconds: 60

# --- Strategy: London Breakout + Momentum Fallback ---
strategy:
  # Indicator periods (used for both strategies)
  ema_fast: 21        # H1 fast EMA (pullback zone)
  ema_slow: 50        # H1 slow EMA (trend filter)
  ema_trend: 100      # H1 trend EMA (direction)
  rsi_period: 14
  atr_period: 14
  adx_period: 14
  adx_threshold: 20   # Min ADX for valid trend
  rr_ratio: 1.3       # Risk:Reward
  # RSI bands (momentum strategy)
  rsi_buy_low: 25.0
  rsi_buy_high: 65.0
  rsi_sell_low: 35.0
  rsi_sell_high: 75.0
  # Momentum breakout params
  pullback_bars: 5
  ema_tolerance_pct: 0.006
  h4_slope_bars: 5
  breakout_bars: 20
  breakout_atr_sl: 1.5
  rsi_breakout_max: 75
  rsi_breakout_min: 25
  min_sl_pips: 15
  di_separation: 0
  # --- London Breakout (PRIMARY strategy) ---
  london_breakout: true
  asian_start_hour: 0
  asian_end_hour: 6
  london_entry_start: 7
  london_entry_end: 10
  min_asian_range_pips: 20
  max_asian_range_pips: 45
  range_buffer_atr: 0.1
  london_trend_filter: true
  london_retest: false
  retest_lookback: 5
  # --- Dual Session: NY Breakout addition ---
  dual_session: false         # NY breakout disabled (European range too wide)
  ny_range_start: 7           # European range start (UTC)
  ny_range_end: 12            # European range end (UTC)
  ny_entry_start: 13          # NY entry window start (UTC)
  ny_entry_end: 16            # NY entry window end (UTC)

# --- Risk Management ---
risk:
  risk_percent: 1.5            # Risk per trade — aggressive for return target
  risk_reduced: 0.75           # Reduced risk after consecutive losses (%)
  max_spread_pips: 2.5
  max_slippage_pips: 3.0
  pip_value_per_lot: 10.0      # EURUSD standard: $10/pip/lot

# --- FundedNext Compliance ---
compliance:
  initial_balance: 6000.0
  max_daily_loss_pct: 3.5      # Internal limit (prop = 5%)
  max_total_dd_pct: 8.0        # Internal limit (prop = 10%)
  trailing_dd_enabled: true
  trailing_dd_pct: 6.0          # Kill switch at 6% DD from peak balance
  dd_tier1_pct: 2.0             # Reduce risk at 2% DD from peak
  dd_tier2_pct: 4.0             # Further reduce risk at 4% DD from peak
  dd_tier2_factor: 0.4          # tier2 risk = risk_reduced × 0.4
  max_consec_losses: 5         # Pause after 5 consecutive losses
  max_trades_per_day: 2        # London only: 1 entry/day + buffer
  reduce_risk_after: 3         # Switch to reduced risk after N losses

# --- Trade Management ---
trade_management:
  breakeven_enabled: false
  breakeven_r: 1.0
  trailing_enabled: false
  trailing_start_r: 2.0
  trailing_atr_mult: 2.0
  partial_close_enabled: false
  partial_close_r: 1.0
  partial_close_pct: 50.0

# --- Session Filter ---
session:
  enabled: false               # London Breakout has built-in hour filter
  start_hour_utc: 7
  end_hour_utc: 17

# --- News Filter ---
news:
  enabled: true
  pre_minutes: 8
  post_minutes: 8
  cancel_pendings: true
  move_to_breakeven: true
  calendar_url: "https://nfs.faireconomy.media/ff_calendar_thisweek.json"
  cache_ttl_seconds: 14400
  fail_safe: true

# --- Telegram Alerts ---
telegram:
  enabled: false
  bot_token: "YOUR_BOT_TOKEN_HERE"
  chat_id: "YOUR_CHAT_ID_HERE"

# --- Logging ---
logging:
  log_dir: "logs"
  trade_csv: true
  system_log: true
  verbose: false

# --- Backtest Settings ---
backtest:
  start_date: "2024-01-01"
  end_date: "2026-12-31"
  initial_balance: 6000.0
  spread_pips: 1.0
  slippage_pips: 0.5
